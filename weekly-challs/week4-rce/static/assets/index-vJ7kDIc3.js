(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const N=["███████╗██╗  ██╗███████╗██╗     ██╗","██╔════╝██║  ██║██╔════╝██║     ██║","███████╗███████║█████╗  ██║     ██║","╚════██║██╔══██║██╔══╝  ██║     ██║","███████║██║  ██║███████╗███████╗███████╗","╚══════╝╚═╝  ╚═╝╚══════╝╚══════╝╚══════╝"],O="QuarkShell",M="user",U="quark.ctf",_={email:"teamquark@vit.edu",github:"TeamQuarkVIT",linkedin:"teamquark"},W="Hi stranger. Welcome to QuarkShell.",G={background:"#0C0623",foreground:"#F8DDE5",banner:"#FF9951",border:{visible:!0,color:"#FFADE2"},prompt:{default:"#A5A7A7",user:"#FE6BC9",host:"#70FDFF",input:"#FF7685"},link:{text:"#B6AAEE",highlightColor:"#FFADE2",highlightText:"#0C0623"},commands:{textColor:"#FD9BDB"}},o={ascii:N,title:O,username:M,hostname:U,social:_,aboutGreeting:W,colors:G};(()=>{const e=document.createElement("style"),t=document.head,r=`body {background: ${o.colors.background}}`,s=`body {color: ${o.colors.foreground}}`,n=`input {background: ${o.colors.background}}`,i=`input {color: ${o.colors.prompt.input}}`,d=`.output {color: ${o.colors.prompt.input}}`,f=`#pre-host {color: ${o.colors.prompt.host}}`,c=`#host {color: ${o.colors.prompt.host}}`,S=`#pre-user {color: ${o.colors.prompt.user}}`,P=`#user {color: ${o.colors.prompt.user}}`,A=`#prompt {color: ${o.colors.prompt.default}}`,B=`pre {color: ${o.colors.banner}}`,D=`a {color: ${o.colors.link.text}}`,x=`a:hover {background: ${o.colors.link.highlightColor}}`,H=`a:hover {color: ${o.colors.link.highlightText}}`,C=`.command {color: ${o.colors.commands.textColor}}`,F=`.keys {color: ${o.colors.banner}}`;t.appendChild(e),e.sheet&&(e.sheet.insertRule(`#bars {background: ${o.colors.background}}`),e.sheet.insertRule(`main {border-color: ${o.colors.border.color}}`),e.sheet.insertRule(`#bar-1 {background: ${o.colors.border.color}; color: ${o.colors.background}}`),e.sheet.insertRule(`#bar-2 {background: ${o.colors.border.color}}`),e.sheet.insertRule(`#bar-3 {background: ${o.colors.border.color}}`),e.sheet.insertRule(`#bar-4 {background: ${o.colors.border.color}}`),e.sheet.insertRule(`#bar-5 {background: ${o.colors.border.color}}`),e.sheet.insertRule(r),e.sheet.insertRule(s),e.sheet.insertRule(n),e.sheet.insertRule(i),e.sheet.insertRule(d),e.sheet.insertRule(f),e.sheet.insertRule(c),e.sheet.insertRule(S),e.sheet.insertRule(P),e.sheet.insertRule(A),e.sheet.insertRule(B),e.sheet.insertRule(D),e.sheet.insertRule(x),e.sheet.insertRule(H),e.sheet.insertRule(C),e.sheet.insertRule(F))})();const K={commands:[["'id'","Print the genuine and effective user ID and group ID."],["'whoami'","Who am I?"],["'ls'","List files & directories in a folder."],["'pwd'","Print working directory."],["'about'","Learn more about us :)"],["'exit'","Exit the application?"]]},q=()=>{const e=[];return e.push("<br>"),K.commands.forEach(t=>{const r="&nbsp;";let s="";s+=r.repeat(2),s+="<span class='command'>",s+=t[0],s+="</span>",s+=r.repeat(17-t[0].length),s+=t[1],e.push(s)}),e.push("<br>"),e.push("Press <span class='keys'>[Tab]</span> for auto completion."),e.push("Press <span class='keys'>[Esc]</span> to clear the input line."),e.push("Press <span class='keys'>[↑][↓]</span> to scroll through your history of commands."),e.push("<br>"),e},Q=q(),Y=()=>{const e=[];return e.push("<br>"),o.ascii.forEach(t=>{let r="";for(let n=0;n<t.length;n++)t[n]===" "?r+="&nbsp;":r+=t[n];let s=`<pre>${r}</pre>`;e.push(s)}),e.push("<br>"),e.push("Welcome to QuarkShell v1.0.0"),e.push("Type <span class='command'>'help'</span> for a list of all available commands."),e.push("Your goal is to read the contents of flag.txt"),e.push("<br>"),e},j=Y(),V=()=>{const e=[],t="&nbsp;",r="Email",s="Github",n="Linkedin",i=`<i class='fa-solid fa-envelope'></i> ${r}`,d=`<i class='fa-brands fa-github'></i> ${s}`,f=`<i class='fa-brands fa-linkedin'></i> ${n}`;let c="";return e.push("<br>"),e.push(o.aboutGreeting),e.push("<br>"),c+=t.repeat(2),c+=i,c+=t.repeat(17-r.length),c+=`<a target='_blank' href='mailto:${o.social.email}'>${o.social.email}</a>`,e.push(c),c="",c+=t.repeat(2),c+=d,c+=t.repeat(17-s.length),c+=`<a target='_blank' href='https://github.com/${o.social.github}'>github/${o.social.github}</a>`,e.push(c),c="",c+=t.repeat(2),c+=f,c+=t.repeat(17-n.length),c+=`<a target='_blank' href='https://www.linkedin.com/company/${o.social.linkedin}'>linkedin/${o.social.linkedin}</a>`,e.push(c),e.push("<br>"),e},z=V();let p=document.getElementById("write-lines"),u=0,E="",l;const b=p,g=document.getElementById("terminal"),a=document.getElementById("user-input"),J=document.getElementById("password-field"),y=document.getElementById("pre-host"),$=document.getElementById("pre-user"),w=document.getElementById("host"),v=document.getElementById("user"),R=document.getElementById("prompt"),X=["help","about","projects","whoami","repo","banner","clear"],m=[],L=()=>{const e=document.getElementById("main");e&&(e.scrollTop=e.scrollHeight)};function k(e){const t=e.key;switch(t){case"Enter":e.preventDefault(),Z(),L();break;case"Escape":a.value="";break;case"ArrowUp":I(t),e.preventDefault();break;case"ArrowDown":I(t);break;case"Tab":ee(),e.preventDefault();break}}function Z(){if(!p||!R)return;const e="";let t;if(l=a.value,t=`<span class='output'>${l}</span>`,m.push(l),u=m.length,l==="clear"){T(l.toLowerCase().trim()),a.value=e,l=e;return}const r=document.createElement("div");r.innerHTML=`<span id="prompt">${R.innerHTML}</span> ${t}`,p.parentNode&&p.parentNode.insertBefore(r,p),l.trim().length!==0&&T(l.toLowerCase().trim()),a.value=e,l=e}function ee(){let e=a.value;for(const t of X)if(t.startsWith(e)){a.value=t;return}}function I(e){switch(e){case"ArrowDown":u!==m.length&&(u+=1,a.value=m[u],u===m.length&&(a.value=E));break;case"ArrowUp":u===m.length&&(E=a.value),u!==0&&(u-=1,a.value=m[u]);break}}function T(e){if(e.toLowerCase().includes("sudo")){h(["Never gonna give you up---","<br>"]);return}switch(e){case"clear":setTimeout(()=>{!g||!b||(g.innerHTML="",g.appendChild(b),p=b)});break;case"help":h(Q);break;case"about":h(z);break;case"rm -rf":h(["Permission not granted.","<br>"]);break;default:let t=new FormData;t.append("user_input",e),fetch("/",{method:"POST",body:t}).then(r=>r.text()).then(r=>h(r.split(`
`))).catch(r=>h(["Oops, an unknown error occured..."]));break}}function h(e){e.forEach((t,r)=>{te(t,r)})}function te(e,t){setTimeout(()=>{if(!p)return;const r=document.createElement("p");r.innerHTML=e,p.parentNode.insertBefore(r,p),L()},40*t)}const oe=()=>{w&&(w.innerText=o.hostname),v&&(v.innerText=o.username),y&&(y.innerText=o.hostname),$&&($.innerText=o.username),window.addEventListener("load",()=>{h(j)}),a.addEventListener("keypress",k),a.addEventListener("keydown",k),J.addEventListener("keypress",k),window.addEventListener("click",()=>{function e(){var r,s;var t="";if(window.getSelection)t=(r=window.getSelection())==null?void 0:r.toString();else if(document.getSelection)t=(s=document.getSelection())==null?void 0:s.toString();else return!1;return t.length!=0}e()||a.focus()})};oe();
